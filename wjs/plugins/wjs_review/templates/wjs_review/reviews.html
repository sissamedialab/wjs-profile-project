{% extends "wjs_review/base.html" %}
{% load static %}
{% block bootstrap5_extra_head %}
    {{ block.super }}
    <link rel="stylesheet"
          type="text/css"
          href="{% static '/css/datatables.css' %}" />
    <script type="text/javascript"
            src="{% static '/js/datatables.min.js' %}"></script>
{% endblock bootstrap5_extra_head %}
{% block title %}
    Dashboard
{% endblock title %}
{% load wjs_review %}
{% block content_wrapper %}
    <div class="container">
        <div class="row">
            <div class="col-sm-12">
                <h2>Pending papers</h2>
            </div>
        </div>
    </div>
    <div class="container">
        <div class="row">
            <div class="column sm-12">
                <div class="card border border-2">
                    <div class="card-body">
                        TODO: <strong>Filters</strong> (click or type to filter paper)
                        Title, reviewer or author:
                        <input type="text" />
                        ;
                        <button type="button" class="btn btn-secondary">only requiring attention</button>
                        ;
                        <span class="dropdown">
                            <button class="btn btn-secondary dropdown-toggle"
                                    type="button"
                                    id="dropdownMenuButton1"
                                    data-bs-toggle="dropdown"
                                    aria-expanded="false">Special issue</button>
                            <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton1">
                                <li>
                                    <a class="dropdown-item" href="#">SI-1</a>
                                </li>
                                <li>
                                    <a class="dropdown-item" href="#">...</a>
                                </li>
                            </ul>
                        </span>; ...
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="container">
        <table class="table table-hover" id="editor-papers">
            <thead class="sticky-top top-0 bg-white text-center">
                <tr>
                    <th scope="col">ID</th>
                    <th scope="col">Authors</th>
                    <th scope="col">Title</th>
                    <th scope="col" title="article type">Type</th>
                    <th scope="col" title="special Issue">SI</th>
                    <th scope="col">Status</th>
                    <th scope="col" title="review requests">Reviewers</th>
                    <th scope="col" title="latest personal note">
                        <a class="text-decoration-none"
                           data-bs-toggle="collapse"
                           href=".personal-note"
                           role="button"
                           aria-expanded="false"
                           aria-controls="personal-note">Notes</a>
                    </th>
                </tr>
            </thead>
            <tbody>
                {% for workflow in workflows %}
                    {% include "wjs_review/elements/article_listing_for_editor_tr.html" %}
                {% endfor %}
            </tbody>
        </table>
        {% comment %} To make the table sortable, I tried  https://stackoverflow.com/a/72874975/1581629 but keep on getting `tr.children[idx] is undefined`... pity... {% endcomment %}
        <script>
            new DataTable('#editor-papers', {
                info: false,
                searching: false,
                ordering: true,
                paging: false,
            columnDefs: [
                { orderable: false, targets: 7 }
            ]
            });
        </script>
    </div>
    <div class="container">
        <div>
            <button class="btn btn-primary"
                    type="button"
                    data-bs-toggle="collapse"
                    data-bs-target="#oldVersion"
                    aria-expanded="false"
                    aria-controls="oldVersion">Non-table previous version</button>
        </div>
        <div class="collapse" id="oldVersion">
            {% for workflow in workflows %}
                {% include "wjs_review/elements/article_listing_for_editor.html" %}
            {% endfor %}
        </div>
    </div>
{% endblock content_wrapper %}
