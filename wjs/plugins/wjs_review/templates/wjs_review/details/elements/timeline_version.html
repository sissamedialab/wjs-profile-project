{% load django_bootstrap5 %}
{% if messages %}
  <div class="accordion-item">
    <h2 class="accordion-header" id="timeline-{{ version.pk }}">
      <button class="accordion-button{% if version.pk != form.cleaned_data.current_version and article.current_review_round_object.pk != version.pk %} collapsed{% endif %}" type="button" data-bs-toggle="collapse" data-bs-target="#collapse-timeline-{{ version.pk }}" aria-expanded="{% if version.pk == form.cleaned_data.current_version or article.current_review_round_object.pk == version.pk %} true{% else %}false{% endif %}" aria-controls="collapse-timeline-{{ version.pkj }}">
      {# Here "version" can refer either to a ReviewRound or a TypesettingRound; the first has "date_started", the second has "date_created" #}
      {% if version.date_started %}
        {% translate "Version" %} {{ version.round_number }}
      {% else %}
        {% translate "Production Version" %} {{ version.round_number }}
      {% endif %}
      </button>
    </h2>
    <div id="collapse-timeline-{{ version.pk }}" class="accordion-collapse collapse{% if version.pk == form.cleaned_data.current_version or article.current_review_round_object.pk == version.pk %} show{% endif %}" aria-labelledby="heading-timeline-{{ version }}">
      <div class="accordion-body d-flex flex-column gap-4">
      <div class="d-flex flex-column gap-2">
        {% for message in messages %}
          {% include "wjs_review/details/elements/timeline_message.html" %}
        {% endfor %}
      </div>
      </div>
    </div>
  </div>
{% endif %}
