{% load django_bootstrap5 wjs_articles wjs_review wjs_tags %}
{% article_css_classes workflow as article_classes %}

<div class="d-flex justify-content-between">
  <div class="d-flex align-items-center gap-3">
    <h3>
      <span class="badge {{ article_classes.section_css }}">{{ article.section.name }}</span> -
      {{ workflow }}
    </h3>
    {% if workflow|is_user_article_manager:request.user %}
      <h5>
        <span class="badge {{ article_classes.state_css }}" title="{% translate "State" %}: {{ workflow.state_label }}">
          {{ workflow.state_label }}<br>
          {% with status_date=workflow.article|get_status_date_label %}
            {% if status_date %}
              ({{ status_date }})
            {% endif %}
          {% endwith %}
        </span>
      </h5>
    {% endif %}
  </div>
  <div class="d-flex align-items-center gap-3">
    {% if workflow|is_user_director:request.user or request.user|is_user_eo %}
      {% url "wjs_article_admin_decision" pk=workflow.pk as make_decision_url %}
    {% elif workflow|is_user_article_editor:request.user %}
      {% url "wjs_article_decision" pk=workflow.pk as make_decision_url %}
    {% endif %}
    {% if make_decision_url %}
      {% bootstrap_button "Make decision" href=make_decision_url button_class="btn-primary" %}
    {% endif %}
    {% if workflow|is_user_article_author:request.user %}
      {% bootstrap_button '<i class="bi bi-info-circle"></i> Help' href="/site/authors" button_class="btn-outline-primary" target="_blank" %}
    {% elif workflow|is_user_article_editor:request.user %}
      {% bootstrap_button '<i class="bi bi-info-circle"></i> Help' href="/site/editors" button_class="btn-outline-primary" target="_blank" %}
    {% elif workflow|is_user_article_reviewer:request.user %}
      {% bootstrap_button '<i class="bi bi-info-circle"></i> Help' href="/site/reviewers" button_class="btn-outline-primary" target="_blank" %}
    {% endif %}
  </div>
</div>
