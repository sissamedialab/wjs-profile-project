{% load wjs_review wjs_tags %}
<div class="col-sm-12">
    <p class="h2">{{ workflow.article }}</p>
        <p>
            <span class="badge bg-secondary">{{ workflow.article.section.name }}</span>
            {% if request.user|is_user_eo or workflow|is_user_article_author:request.user or workflow|is_user_article_editor:request.user or workflow|is_user_director:request.user or workflow|is_user_typesetter:request.user %}
                by {{ workflow.article.correspondence_author }}(*) <!-- look for a better graphic solution? -->
                {% if workflow.article.authors.count > 1 %}
                    <a class="text-secondary"
                       data-bs-toggle="collapse"
                       href="#otherAuthors"
                       role="button"
                       aria-expanded="false"
                       aria-controls="otherAuthors">et al.</a>
                    <span class="collapse" id="otherAuthors">
                        {% for author in workflow.article.authors.all %}
                            {% if author != workflow.article.correspondence_author %}{{ author }}{% endif %}
                            {% if not forloop.last %},{% endif %}
                        {% endfor %}
                    </span>
                {% endif %}
            {% endif %}
        </p>
        {% with preprintid=workflow.article|preprintid %}
        {% if preprintid %}
        <p>{{ preprintid }}</p>
        {% endif %}
    {% endwith %}
    {% if workflow.production_flag_galleys_ok == workflow.GalleysStatus.NOT_TESTED %}
      <p class="text-warning">Galleys NOT TESTED</p>
    {% elif workflow.production_flag_galleys_ok == workflow.GalleysStatus.TEST_FAILED %}
      <p class="text-danger">Galleys TEST FAILED</p>
    {% else %}
      <p class="text-success">Galleys OK</p>
    {% endif %}
</div>
